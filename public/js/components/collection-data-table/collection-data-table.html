<!--<div  ng-if="$ctrl.groupedFiles == null" style="text-align:center" >
  <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
</div>
-->

<table ng-if="$ctrl.groupedFiles != null"
  class="table is-bordered is-striped is-fullwidth" style="table-layout: fixed;" > 
  <col width="35%">
  <col width="15%">
  <col width="13%">
  <col width="7%">
  <col width="30%">
  <tr style="cursor:pointer;">
    <th>Dataset</th>
    <th>Downloads</th>
    <th>Variant</th>
    <th>Format</th>
    <th>License</th>
  </tr>
  <tr ng-repeat-start="file in $ctrl.groupedFiles" style="position:relative;">
  </tr>
  
  <tr style="position:relative;" ng-repeat-start="download in file.downloads">
    
    <td ng-if="$first" rowspan="{{ $ctrl.getRowspan(file) }}">
      <span ng-if="$first">{{file.label}} (<a ng-href="{{file.uri}}">{{ file.version }}</a>)</span></td-->

    <td>

      <div style="display: flex; justify-content: space-between; align-items: center;">

        <div style="cursor:pointer;" ng-click="download.expanded = !download.expanded" ng-class="{ right : !download.expanded, down : download.expanded }" class="arrow"></div>
        

        <div style="display: flex; justify-content: flex-end; align-items: center;">
          {{ $ctrl.formatUploadSize(download.size) }}
          <a ng-href="{{ $ctrl.createRelativeUri(download.files) }}" target="_blank">
            <svg style="margin-left:1em;margin-bottom:-.4em;" width="24" height="24" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd"><path d="M6 16h-5v6h22v-6h-5v-1h6v8h-24v-8h6v1zm14 2c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1zm-7.5-17v14.884l4.736-5.724.764.645-5.979 7.195-6.021-7.205.765-.644 4.735 5.732v-14.883h1z"/></svg>
          </a>
        </div>
        </div>
    </td>

    <td>{{ download.variant }}</td>
    <td>{{ download.format }}</td>
    <td><a ng-href="{{ download.license }}">{{download.license}}</a></td>
  
  </tr>
  <tr ng-repeat-end>
    <td colspan="4" style="padding:0;" ng-if="download.expanded">
      <div style="padding: 0.5rem 0.75rem; border-bottom: 1px solid #dbdbdb;"><b>Comment</b> <br/>{{ download.comment }}</div>
      <div><pre style="max-width:initial; padding: 0.5rem 0.75rem;"><b>Preview</b><br/>{{ download.preview }}</pre></div>
    </td>
  </tr>

  <tr ng-repeat-end></tr>
</table>
